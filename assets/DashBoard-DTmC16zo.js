import{r as g,O as x,o as y,D as C,f as _,g as h,F as w,s as T,n as k,h as t,t as f,u as $,b as D,P as A,e as v,i as u,j as m}from"./index-IaK2R5-W.js";const B={class:"toast-container position-fixed top-0 end-0 p-3"},N={class:"d-flex"},O={class:"toast-body"},S={class:"mb-1"},V={class:"mb-0"},j=["onClick"],L=Object.assign({name:"ToastNotification"},{__name:"Toast",props:{autoDismissTime:{type:Number,default:5e3}},setup(a){const o=a,e=g([]),s=x("emitter"),n=l=>{const{style:i="success",title:r,content:c}=l;e.value.push({style:i,title:r,content:c}),setTimeout(()=>{e.value.length>0&&d(0)},o.autoDismissTime)},d=l=>{e.value.splice(l,1)};return y(()=>{s.on("show-toast",n)}),C(()=>{s.off("show-toast",n)}),(l,i)=>(_(),h("div",B,[(_(!0),h(w,null,T(e.value,(r,c)=>(_(),h("div",{key:c,class:k(["toast show",["toast align-items-center","border-0",r.style==="success"?"bg-success text-white":"bg-danger text-white"]]),role:"alert","aria-live":"assertive","aria-atomic":"true",style:{opacity:"1"}},[t("div",N,[t("div",O,[t("h5",S,f(r.title),1),t("p",V,f(r.content),1)]),t("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto",onClick:p=>d(c),"aria-label":"Close"},null,8,j)])],2))),128))]))}});function R(a){return{all:a=a||new Map,on:function(o,e){var s=a.get(o);s?s.push(e):a.set(o,[e])},off:function(o,e){var s=a.get(o);s&&(e?s.splice(s.indexOf(e)>>>0,1):a.set(o,[]))},emit:function(o,e){var s=a.get(o);s&&s.slice().map(function(n){n(e)}),(s=a.get("*"))&&s.slice().map(function(n){n(o,e)})}}}const b=R(),z={class:"dashboard-sidebar"},E=t("div",{class:"sidebar-header"},[t("h3",null,"後台管理")],-1),F={class:"sidebar-menu"},M=t("i",{class:"bi bi-box-seam"},null,-1),U=t("span",null,"商品管理",-1),P=t("i",{class:"bi bi-receipt"},null,-1),q=t("span",null,"訂單管理",-1),G=t("i",{class:"bi bi-ticket-perforated"},null,-1),H=t("span",null,"優惠券管理",-1),I=t("i",{class:"bi bi-box-arrow-right"},null,-1),J=t("span",null,"登出",-1),K=[I,J],Q={class:"dashboard-content"},W=t("i",{class:"bi bi-list"},null,-1),X=[W],Y=t("div",{class:"user-info"},[t("span",null,"管理員")],-1),Z={class:"content-body"},st={__name:"DashBoard",setup(a){const o=$(),e=D(),s=g(!1);A("emitter",b);const n=async()=>{try{await o.checkAuth()?console.log("User is authenticated"):e.push("/login")}catch(i){console.error("Error checking authentication:",i),e.push("/login")}},d=async()=>{try{await o.logOut(),b.emit("show-toast",{style:"success",title:"已成功登出"}),e.push("/login")}catch(i){console.error("Logout error:",i),b.emit("show-toast",{style:"error",title:"登出失敗",content:i.message})}},l=()=>{s.value=!s.value};return y(async()=>{await o.initializeStore(),n()}),(i,r)=>{const c=v("router-link"),p=v("RouterView");return _(),h(w,null,[t("div",{class:k(["dashboard-container",{"sidebar-collapsed":s.value}])},[t("div",z,[E,t("div",F,[u(c,{to:"/dashboard/products",class:"menu-item"},{default:m(()=>[M,U]),_:1}),u(c,{to:"/dashboard/orders",class:"menu-item"},{default:m(()=>[P,q]),_:1}),u(c,{to:"/dashboard/coupons",class:"menu-item"},{default:m(()=>[G,H]),_:1})]),t("div",{class:"sidebar-footer"},[t("button",{class:"logout-btn",onClick:d},K)])]),t("div",Q,[t("div",{class:"content-header"},[t("button",{class:"sidebar-toggle",onClick:l},X),Y]),t("div",Z,[u(p)])])],2),u(L,{autoDismissTime:5e3})],64)}}};export{st as default};
